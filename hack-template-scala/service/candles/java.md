# Описание проекта

## Задача



Реализовать систему, которая поможет отслеживать курс криптовалют через Telegram-бота.

#### Команды бота

Бот должен поддерживать как минимум следующие команды:
1. Подписка на стрим

    Бот принимает от пользователя `figi` валюты, за обновлением которой хочет следить. Бот каждые 3 секунды отправляет пользователю данные из соответствующей свечи 

2. Отписка от стрима 

    При получении сообщения бот прекращает отправку данных пользователю

3. Подписка на события вида "падение курса валюты C от текущего на X%"
    
    При получении сообщения бот начинает следить за курсом и при необходимости уведомляет об событии пользователя
    

*Опционально:*
Можно реализовать подписку на несколько `figi` одновременно и отписку от стрима конкретного `figi`

#### Нотификации

Ваши коллеги из scala-команды реализуют механизм регистрации webhook для обработки триггеров. Про триггеры и события можете почитать в документации к их задаче.
Ваша задача – реализовать http сервер, на который будут приходить запросы для вызова webhook.

Схема потока данных примерно следующая:
```
1. пользователь регистрирует триггер
user --> telegram --> java app --> scala app

2. триггер активируется по данным котировок
kafka stream --> scala app --> java app --> telegram --> user
```
#### Если у вас нет Scala-разработчика

Если нет скалиста, вас не смогут уведомлять о срабатывании регистрируемых триггеров. 
В этом случае можно реализовать регистрацию триггера полностью на своей стороне (описание есть в задаче скалистов) и сделать HTTP API для активации триггеров (вызывать методы API можно руками). 

---

## Итого



Ваш сервис должен реализовывать: 
1. интеграцию с телеграмом
2. регистрацию и удаление тригеров на события (webhook). где и как хранить триггеры можете обсудить с коллегами из scala-команды
3. интерфейс для webhook 
4. экспорт метрик по вебхукам для prometheus через micrometer

